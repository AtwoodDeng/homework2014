install.packages("randomForest")
library(randomForest)
getwd()
setwd("~/tem/R/lab1")
getwd()
library(ggplot2)
bank=read.table("bank-full.csv",header=TRUE,sep=";")
yesBank=bank[bank$y=='yes',]
noBank=bank[bank$y=='no',]
ind<-sample(2,nrow(training),replace=TRUE,prob=c(0.7,0.3))
ind<-sample(2,nrow(bank),replace=TRUE,prob=c(0.7,0.3))
ind
View(bank)
View(bank)
bank=read.table("bank.csv",header=TRUE,sep=";")
yesBank=bank[bank$y=='yes',]
noBank=bank[bank$y=='no',]
View(bank)
View(bank)
ind<-sample(2,nrow(bank),replace=TRUE,prob=c(0.7,0.3))
traindata<-bank[bank$contact!="unknown",];
View(traindata)
testdata<-bank[bank$contact=="unknown",]
rf<-randomForest(y ~.,traindata,ntree=50,proximity=TRUE,importance=TRUE)
table(predict(rf), bank$y)
print(rf)
plot(rf)
importance(rf)
?importance
plot(rs)
plot(rf)
rf
a = importance(rf)
View(a)
View(a)
rf<-randomForest(Species ~.,traindata,ntree=50,proximity=TRUE,importance=TRUE)
rf<-randomForest(contact ~.,traindata,ntree=50,proximity=TRUE,importance=TRUE)
rf<-randomForest(contact ~.,traindata,ntree=50,proximity=TRUE,importance=TRUE)
rf<-randomForest(y ~.,traindata,ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(contact ~.,traindata,ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(contact ~.,bank[bank$contact!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(education ~.,bank[bank$education!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(education~.,bank[bank$education!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(default ~.,bank[bank$education!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(contact ~.,bank[bank$contact!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
rf<-randomForest(loan ~.,bank[bank$loan!="unknown",],ntree=20,proximity=TRUE,importance=TRUE)
levels(traindata)
levels(traindata$contact)
traindata<- bank [ind==1,]
testdata<- bank [ind==2,]
rf<-randomForest(y ~.,traindata,ntree=50,proximity=TRUE,importance=TRUE);
print(rf)
pred<-predict(rf,testdata)
table(observed=testdata["y"],predicted=pred)
table(observed=testdata[testdata$y],predicted=pred)
table(observed=testdata[bank[ind==2,"y"]],predicted=pred)
table(observed=bank[bank[ind==2,"y"]],predicted=pred)
plot(pred)
pred
clear
clean
